<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>API Integration | COMS-BC3997: Projects in CS</title>
<meta name="author" content="Jessica Zhang">
<meta name="description" content="Jessica's project documentation for “COMS-BC3997: Projects in CS” class.">
<meta name="generator" content="bookdown 0.32 with bs4_book()">
<meta property="og:title" content="API Integration | COMS-BC3997: Projects in CS">
<meta property="og:type" content="book">
<meta property="og:url" content="https://ap4347.github.io/2102/lecture-04.html">
<meta property="og:description" content="Jessica's project documentation for “COMS-BC3997: Projects in CS” class.">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="API Integration | COMS-BC3997: Projects in CS">
<meta name="twitter:description" content="Jessica's project documentation for “COMS-BC3997: Projects in CS” class.">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.4.0/transition.js"></script><script src="libs/bs3compat-0.4.0/tabs.js"></script><script src="libs/bs3compat-0.4.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">COMS-BC3997: Jessica's Project Progress</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
          <li><a class="active" href="index.html">Project Introduction</a></li>
          <li><a class="" href="lecture-01.html">Background Research</a></li>
          <li><a class="" href="lecture-02.html">Timeline</a></li>
          <li><a class="" href="lecture-03.html">DynamoDB Data</a></li>
          <li><a class="" href="lecture-04.html">API Integration</a></li>
          <li><a class="" href="lecture-05.html">Progress Update 1</a></li>
          <li><a class="" href="lecture-06.html">Progress Update 2</a></li>
          <li><a class="" href="lecture-07.html">Progress Update 3</a></li>
          <li><a class="" href="lecture-08.html">Progress Update 4</a></li>
          <li><a class="" href="lecture-09.html">Project Presentation - Halfway!</a></li>
          <li><a class="" href="lecture-10.html">Progress Update 5</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/ap4347/2102">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="lecture-04" class="section level1 unnumbered">
<h1>API Integration<a class="anchor" aria-label="anchor" href="#lecture-04"><i class="fas fa-link"></i></a>
</h1>
<p>There are two methods to create an API with Lambda integration, via Lambda proxy integration or Lambda non-proxy integration.</p>
<p> </p>
<div id="r-markdown-files" class="section level2 unnumbered">
<h2>Lamda Proxy Integration<a class="anchor" aria-label="anchor" href="#r-markdown-files"><i class="fas fa-link"></i></a>
</h2>
<p>The Lambda proxy integration allows the client to call a single Lambda function in the backend.</p>
<p>In Lambda proxy integration, when the client makes a request, the API Gateway forwards the request to Lambda without transforming/modifying it. When a client submits an API request, API Gateway passes to the integrated Lambda function the raw request as-is. This request data includes the request headers, query string parameters, URL path variables, payload, and API configuration data.</p>
<p>This is helpful in my project in that I can easily access the URL path variables by parsing event.path to retrieve information on what page the user wants to pull up. (Web URL Structure: domain/condition/trial name/number)</p>
<div class="inline-figure"><img src="images/lambda.png" width="687" height="370"></div>
<p>For API Gateway to pass the Lambda output as the API response to the client, the Lambda function must return the result in this format.</p>
<div class="inline-figure"><img src="images/result.png" width="687" height="150"></div>
<p><strong>Notes</strong>: The response body must be a string, whereas I want to return data from the DynamoDB table as a JSON response.</p>
<p><strong>Update</strong>: Was informed that you can convert JSON to string using stringify() then back with JSON.parse(). However, I'm a little concerned about any data getting "mistranslated".</p>
</div>
<div id="non-proxy" class="section level2 unnumbered">
  <h2>Lamda Non-Proxy Integration<a class="anchor" aria-label="anchor" href="#non-proxy"><i class="fas fa-link"></i></a>
  </h2> 
  <p>In Lambda non-proxy integration, when the client makes a request, the API Gateway is able to transform it and then forwards it to the lambda. Similarly, when the response data comes from the lambda function to the API Gateway, it sets the header, status code etc.</p>
  <p>Lambda function for the Lambda custom integration only takes input from the API Gateway API integration request body, provided that API Gateway maps the required API request parameters to the integration request body before forwarding the client request to the backend. For this to happen, the API developer must create a mapping template and configure it on the API method when creating the API.</p>
  <div class="inline-figure"><img src="images/map.png" width="687" height="90"></div>
  <p>The function can return an output of any JSON object, a string, a number, a Boolean, or even a binary blob.
  </p>
  <p><strong>Notes: </strong>According to <a href="https://stackoverflow.com/questions/42474264/lambda-integration-vs-lambda-proxy-pros-and-cons">StackOverflow</a>, Lambda Non-Proxy Integration involves a lot more of work to set it up, but it allows the developer to decouple what the lambda receives and returns, and how it gets mapped to different HTTP status codes, headers, and payloads. According to Rick Haffey, "Using Proxy Integration forces (at least a subset of) that responsibility onto the Lambda function. (i.e. knowing how to interpret and decide on HTTP headers, query parameters, status codes, etc.). In doing that, I feel that it muddies the responsibility of the backing Lambda function -- Lambda now needs to both handle whatever "business" logic it's being called to do, and also handle interpreting the incoming HTTP values and decide on the outgoing HTTP response values." Also what my supervisor said :). In the long run, most developers seem to prefer non-proxy integration over proxy integration, so I would rather set it up now rather than use proxy integration and have to rebuild the API later.</p>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="lecture-03.html">DynamoDB Data</a></div>
<div class="next"><a href="lecture-05.html">Progress Update 1</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#lecture-04">API Integration</a></li>
<li>
<a class="nav-link" href="#r-markdown-files">Lambda Proxy Integration</a>
</li>
<li>
  <a class="nav-link" href="#non-proxy">Lambda Non-Proxy Integration</a>
</li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/ap4347/2102/blob/master/04-Lecture.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/ap4347/2102/edit/master/04-Lecture.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>COMS-BC3997: Jessica's Project Progress</strong>" was written by Jessica Zhang. It was last built on 2023-03-19.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
